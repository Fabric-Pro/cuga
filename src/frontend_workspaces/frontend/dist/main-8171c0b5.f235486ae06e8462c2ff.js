"use strict";(self.webpackChunk_carbon_ai_chat_examples_web_components_basic=self.webpackChunk_carbon_ai_chat_examples_web_components_basic||[]).push([[6222],{83533:function(e,t,a){a.d(t,{A:function(){return i}});var l=a(7378),n=a(83281);a(33802);function i({onClose:e}){const[t,a]=(0,l.useState)({enablePolicies:!0,intentPolicies:[],sopPolicies:[],subAgentPolicies:[],appPolicies:[],toolGuards:[],toolEnrichments:[],answerPolicies:[],strictMode:!1,logViolations:!0}),[i,s]=(0,l.useState)("intent"),[c,o]=(0,l.useState)("guards"),[r,m]=(0,l.useState)(null),[d,u]=(0,l.useState)("idle");(0,l.useEffect)(()=>{p()},[]);const p=async()=>{try{const e=await fetch("/api/config/policies");if(e.ok){const t=await e.json();a({enablePolicies:t.enablePolicies??!0,intentPolicies:t.intentPolicies??[],sopPolicies:t.sopPolicies??[],subAgentPolicies:t.subAgentPolicies??[],appPolicies:t.appPolicies??[],toolGuards:t.toolGuards??[],toolEnrichments:t.toolEnrichments??[],answerPolicies:t.answerPolicies??[],strictMode:t.strictMode??!1,logViolations:t.logViolations??!0})}}catch(e){}},g=()=>{const e={id:Date.now().toString(),name:"New Intent Policy",policyType:"intent",enabled:!0,intentPattern:"",action:"block",response:"",allowedTopics:[]};a({...t,intentPolicies:[...t.intentPolicies,e]})},b=()=>{const e={id:Date.now().toString(),name:"New SOP",policyType:"sop",enabled:!0,trigger:"",steps:[""],description:""};a({...t,sopPolicies:[...t.sopPolicies,e]})},E=()=>{const e={id:Date.now().toString(),name:"New Sub-Agent Policy",policyType:"subagent",enabled:!0,subAgentName:"",constraints:[],allowedTools:[],restrictions:""};a({...t,subAgentPolicies:[...t.subAgentPolicies,e]})},h=()=>{const e={id:Date.now().toString(),name:"New App Policy",policyType:"app",enabled:!0,appName:"",instructions:"",rules:[],permissions:[]};a({...t,appPolicies:[...t.appPolicies,e]})},v=()=>{const e={id:Date.now().toString(),name:"New Tool Guard",policyType:"toolguard",enabled:!0,toolName:"",guardType:"rate_limit",config:{maxCallsPerMinute:10,maxCallsPerHour:100},description:""};a({...t,toolGuards:[...t.toolGuards,e]})},f=()=>{const e={id:Date.now().toString(),name:"New Answer Policy",policyType:"answer",enabled:!0,responseFormat:"natural",tone:"professional",includeConfidence:!1,includeSources:!1,customInstructions:[],forbiddenPhrases:[]};a({...t,answerPolicies:[...t.answerPolicies,e]})},N=()=>{const e={id:Date.now().toString(),name:"New Tool Enrichment",policyType:"toolenrichment",enabled:!0,toolName:"",customInstructions:[],exampleUsages:[],bestPractices:[]};a({...t,toolEnrichments:[...t.toolEnrichments,e]})},P=(e,l)=>{a({...t,intentPolicies:t.intentPolicies.map(t=>t.id===e?{...t,...l}:t)})},y=(e,l)=>{a({...t,sopPolicies:t.sopPolicies.map(t=>t.id===e?{...t,...l}:t)})},C=(e,l)=>{a({...t,subAgentPolicies:t.subAgentPolicies.map(t=>t.id===e?{...t,...l}:t)})},k=(e,l)=>{a({...t,appPolicies:t.appPolicies.map(t=>t.id===e?{...t,...l}:t)})},x=(e,l)=>{a({...t,toolGuards:t.toolGuards.map(t=>t.id===e?{...t,...l}:t)})},w=(e,l)=>{a({...t,answerPolicies:t.answerPolicies.map(t=>t.id===e?{...t,...l}:t)})},T=(e,l)=>{a({...t,toolEnrichments:t.toolEnrichments.map(t=>t.id===e?{...t,...l}:t)})},A=(e,l)=>{switch(l){case"intent":a({...t,intentPolicies:t.intentPolicies.filter(t=>t.id!==e)});break;case"sop":a({...t,sopPolicies:t.sopPolicies.filter(t=>t.id!==e)});break;case"subagent":a({...t,subAgentPolicies:t.subAgentPolicies.filter(t=>t.id!==e)});break;case"app":a({...t,appPolicies:t.appPolicies.filter(t=>t.id!==e)});break;case"toolguards":a({...t,toolGuards:t.toolGuards.filter(t=>t.id!==e)});break;case"toolenrichments":a({...t,toolEnrichments:t.toolEnrichments.filter(t=>t.id!==e)});break;case"answer":a({...t,answerPolicies:t.answerPolicies.filter(t=>t.id!==e)})}};return l.createElement("div",{className:"config-modal-overlay",onClick:e},l.createElement("div",{className:"config-modal",onClick:e=>e.stopPropagation()},l.createElement("div",{className:"config-modal-header"},l.createElement("h2",null,"Policies Configuration"),l.createElement("button",{className:"config-modal-close",onClick:e},l.createElement(n.X,{size:20}))),l.createElement("div",{className:"config-modal-tabs"},l.createElement("button",{className:"config-tab "+("intent"===i?"active":""),onClick:()=>s("intent")},"Intent Policies"),l.createElement("button",{className:"config-tab "+("sop"===i?"active":""),onClick:()=>s("sop")},"SOPs"),l.createElement("button",{className:"config-tab "+("subagent"===i?"active":""),onClick:()=>s("subagent")},"Sub-Agent Policies"),l.createElement("button",{className:"config-tab "+("app"===i?"active":""),onClick:()=>s("app")},"App Policies"),l.createElement("button",{className:"config-tab "+("toolguards"===i||"toolenrichments"===i?"active":""),onClick:()=>{s("toolguards"),o("guards")}},"Tools"),l.createElement("button",{className:"config-tab "+("answer"===i?"active":""),onClick:()=>s("answer")},"Answer Policy")),l.createElement("div",{className:"config-modal-content"},l.createElement("div",{className:"config-card"},l.createElement("h3",null,"Global Settings"),l.createElement("div",{className:"config-form"},l.createElement("div",{className:"form-group"},l.createElement("label",{className:"checkbox-label"},l.createElement("input",{type:"checkbox",checked:t.enablePolicies,onChange:e=>a({...t,enablePolicies:e.target.checked})}),l.createElement("span",null,"Enable All Policies")),l.createElement("small",null,"Master switch for all policy enforcement")),l.createElement("div",{className:"form-row"},l.createElement("div",{className:"form-group"},l.createElement("label",{className:"checkbox-label"},l.createElement("input",{type:"checkbox",checked:t.strictMode,onChange:e=>a({...t,strictMode:e.target.checked}),disabled:!t.enablePolicies}),l.createElement("span",null,"Strict Mode")),l.createElement("small",null,"Deny all actions not explicitly allowed")),l.createElement("div",{className:"form-group"},l.createElement("label",{className:"checkbox-label"},l.createElement("input",{type:"checkbox",checked:t.logViolations,onChange:e=>a({...t,logViolations:e.target.checked}),disabled:!t.enablePolicies}),l.createElement("span",null,"Log Violations")),l.createElement("small",null,"Record all policy violations"))))),"intent"===i&&l.createElement("div",{className:"config-card"},l.createElement("div",{className:"section-header"},l.createElement("h3",null,"Intent Blockers & Redirections"),l.createElement("button",{className:"add-btn",onClick:g,disabled:!t.enablePolicies},l.createElement(n.FWt,{size:16}),"Add Intent Policy")),l.createElement("div",{className:"sources-list"},t.intentPolicies.map(e=>{const a=r===e.id;return l.createElement("div",{key:e.id,className:"agent-config-card"},l.createElement("div",{className:"agent-config-header"},l.createElement("div",{className:"agent-config-top"},l.createElement("input",{type:"checkbox",checked:e.enabled,onChange:t=>P(e.id,{enabled:t.target.checked}),disabled:!t.enablePolicies}),l.createElement("input",{type:"text",value:e.name,onChange:t=>P(e.id,{name:t.target.value}),className:"agent-config-name",placeholder:"Policy Name",disabled:!t.enablePolicies}),l.createElement("button",{className:"expand-btn",onClick:()=>m(a?null:e.id)},a?l.createElement(n.rXn,{size:16}):l.createElement(n.yQN,{size:16})),l.createElement("button",{className:"delete-btn",onClick:()=>A(e.id,"intent"),disabled:!t.enablePolicies},l.createElement(n.TBR,{size:16})))),a&&l.createElement("div",{className:"agent-config-details"},l.createElement("div",{className:"form-group"},l.createElement("label",null,"Intent Pattern"),l.createElement("input",{type:"text",value:e.intentPattern,onChange:t=>P(e.id,{intentPattern:t.target.value}),placeholder:"e.g., 'personal information', 'sensitive data'",disabled:!t.enablePolicies}),l.createElement("small",null,"Keywords or phrases that trigger this policy")),l.createElement("div",{className:"form-group"},l.createElement("label",null,"Action"),l.createElement("select",{value:e.action,onChange:t=>P(e.id,{action:t.target.value}),disabled:!t.enablePolicies},l.createElement("option",{value:"block"},"Block"),l.createElement("option",{value:"redirect"},"Redirect"),l.createElement("option",{value:"restrict"},"Restrict to Topics"))),"block"===e.action&&l.createElement("div",{className:"form-group"},l.createElement("label",null,"Response Message"),l.createElement("textarea",{value:e.response||"",onChange:t=>P(e.id,{response:t.target.value}),placeholder:"I cannot help with that request.",rows:2,disabled:!t.enablePolicies})),"redirect"===e.action&&l.createElement("div",{className:"form-group"},l.createElement("label",null,"Redirect To"),l.createElement("input",{type:"text",value:e.redirectTo||"",onChange:t=>P(e.id,{redirectTo:t.target.value}),placeholder:"Alternative response or agent",disabled:!t.enablePolicies})),"restrict"===e.action&&l.createElement("div",{className:"form-group"},l.createElement("label",null,"Allowed Topics"),l.createElement("input",{type:"text",value:e.allowedTopics?.join(", ")||"",onChange:t=>P(e.id,{allowedTopics:t.target.value.split(",").map(e=>e.trim()).filter(e=>e)}),placeholder:"topic1, topic2, topic3",disabled:!t.enablePolicies}),l.createElement("small",null,"Comma-separated list of allowed topics"))))})),0===t.intentPolicies.length&&l.createElement("div",{className:"empty-state"},l.createElement("p",null,'No intent policies configured. Click "Add Intent Policy" to create one.'))),"sop"===i&&l.createElement("div",{className:"config-card"},l.createElement("div",{className:"section-header"},l.createElement("h3",null,"Standard Operating Procedures (SOPs)"),l.createElement("button",{className:"add-btn",onClick:b,disabled:!t.enablePolicies},l.createElement(n.FWt,{size:16}),"Add SOP")),l.createElement("div",{className:"sources-list"},t.sopPolicies.map(e=>{const a=r===e.id;return l.createElement("div",{key:e.id,className:"agent-config-card"},l.createElement("div",{className:"agent-config-header"},l.createElement("div",{className:"agent-config-top"},l.createElement("input",{type:"checkbox",checked:e.enabled,onChange:t=>y(e.id,{enabled:t.target.checked}),disabled:!t.enablePolicies}),l.createElement("input",{type:"text",value:e.name,onChange:t=>y(e.id,{name:t.target.value}),className:"agent-config-name",placeholder:"SOP Name",disabled:!t.enablePolicies}),l.createElement("button",{className:"expand-btn",onClick:()=>m(a?null:e.id)},a?l.createElement(n.rXn,{size:16}):l.createElement(n.yQN,{size:16})),l.createElement("button",{className:"delete-btn",onClick:()=>A(e.id,"sop"),disabled:!t.enablePolicies},l.createElement(n.TBR,{size:16}))),!a&&l.createElement("div",{className:"agent-summary"},l.createElement("span",{className:"agent-summary-item"},e.steps.length," step",1!==e.steps.length?"s":""))),a&&l.createElement("div",{className:"agent-config-details"},l.createElement("div",{className:"form-group"},l.createElement("label",null,"Description"),l.createElement("textarea",{value:e.description,onChange:t=>y(e.id,{description:t.target.value}),placeholder:"What this SOP is for...",rows:2,disabled:!t.enablePolicies})),l.createElement("div",{className:"form-group"},l.createElement("label",null,"Trigger Condition"),l.createElement("input",{type:"text",value:e.trigger,onChange:t=>y(e.id,{trigger:t.target.value}),placeholder:"When should this SOP be applied?",disabled:!t.enablePolicies}),l.createElement("small",null,"Condition or keywords that activate this SOP")),l.createElement("div",{className:"form-group"},l.createElement("div",{className:"form-group-header"},l.createElement("label",null,"Steps (in order)"),l.createElement("button",{className:"add-small-btn",onClick:()=>y(e.id,{steps:[...e.steps,""]}),disabled:!t.enablePolicies},l.createElement(n.FWt,{size:12}),"Add Step")),l.createElement("div",{className:"policies-list"},e.steps.map((a,i)=>l.createElement("div",{key:i,className:"policy-item"},l.createElement("span",{style:{fontWeight:"bold",marginRight:"8px"}},i+1,"."),l.createElement("textarea",{value:a,onChange:t=>{const a=[...e.steps];a[i]=t.target.value,y(e.id,{steps:a})},placeholder:"Describe this step...",rows:2,disabled:!t.enablePolicies}),l.createElement("button",{className:"remove-btn",onClick:()=>{const t=e.steps.filter((e,t)=>t!==i);y(e.id,{steps:t})},disabled:!t.enablePolicies},l.createElement(n.X,{size:14}))))))))})),0===t.sopPolicies.length&&l.createElement("div",{className:"empty-state"},l.createElement("p",null,'No SOPs configured. Click "Add SOP" to create one.'))),"subagent"===i&&l.createElement("div",{className:"config-card"},l.createElement("div",{className:"section-header"},l.createElement("h3",null,"Sub-Agent Policies"),l.createElement("button",{className:"add-btn",onClick:E,disabled:!t.enablePolicies},l.createElement(n.FWt,{size:16}),"Add Sub-Agent Policy")),l.createElement("div",{className:"sources-list"},t.subAgentPolicies.map(e=>{const a=r===e.id;return l.createElement("div",{key:e.id,className:"agent-config-card"},l.createElement("div",{className:"agent-config-header"},l.createElement("div",{className:"agent-config-top"},l.createElement("input",{type:"checkbox",checked:e.enabled,onChange:t=>C(e.id,{enabled:t.target.checked}),disabled:!t.enablePolicies}),l.createElement("input",{type:"text",value:e.name,onChange:t=>C(e.id,{name:t.target.value}),className:"agent-config-name",placeholder:"Policy Name",disabled:!t.enablePolicies}),l.createElement("button",{className:"expand-btn",onClick:()=>m(a?null:e.id)},a?l.createElement(n.rXn,{size:16}):l.createElement(n.yQN,{size:16})),l.createElement("button",{className:"delete-btn",onClick:()=>A(e.id,"subagent"),disabled:!t.enablePolicies},l.createElement(n.TBR,{size:16})))),a&&l.createElement("div",{className:"agent-config-details"},l.createElement("div",{className:"form-group"},l.createElement("label",null,"Sub-Agent Name"),l.createElement("input",{type:"text",value:e.subAgentName,onChange:t=>C(e.id,{subAgentName:t.target.value}),placeholder:"Which sub-agent does this apply to?",disabled:!t.enablePolicies})),l.createElement("div",{className:"form-group"},l.createElement("label",null,"Restrictions"),l.createElement("textarea",{value:e.restrictions,onChange:t=>C(e.id,{restrictions:t.target.value}),placeholder:"General restrictions for this sub-agent...",rows:2,disabled:!t.enablePolicies})),l.createElement("div",{className:"form-group"},l.createElement("label",null,"Constraints"),l.createElement("input",{type:"text",value:e.constraints.join(", "),onChange:t=>C(e.id,{constraints:t.target.value.split(",").map(e=>e.trim()).filter(e=>e)}),placeholder:"constraint1, constraint2, constraint3",disabled:!t.enablePolicies}),l.createElement("small",null,"Comma-separated behavioral constraints")),l.createElement("div",{className:"form-group"},l.createElement("label",null,"Allowed Tools"),l.createElement("input",{type:"text",value:e.allowedTools.join(", "),onChange:t=>C(e.id,{allowedTools:t.target.value.split(",").map(e=>e.trim()).filter(e=>e)}),placeholder:"tool1, tool2, tool3",disabled:!t.enablePolicies}),l.createElement("small",null,"Tools this sub-agent is allowed to use"))))})),0===t.subAgentPolicies.length&&l.createElement("div",{className:"empty-state"},l.createElement("p",null,'No sub-agent policies configured. Click "Add Sub-Agent Policy" to create one.'))),"app"===i&&l.createElement("div",{className:"config-card"},l.createElement("div",{className:"section-header"},l.createElement("h3",null,"Application Policies"),l.createElement("button",{className:"add-btn",onClick:h,disabled:!t.enablePolicies},l.createElement(n.FWt,{size:16}),"Add App Policy")),l.createElement("div",{className:"sources-list"},t.appPolicies.map(e=>{const a=r===e.id;return l.createElement("div",{key:e.id,className:"agent-config-card"},l.createElement("div",{className:"agent-config-header"},l.createElement("div",{className:"agent-config-top"},l.createElement("input",{type:"checkbox",checked:e.enabled,onChange:t=>k(e.id,{enabled:t.target.checked}),disabled:!t.enablePolicies}),l.createElement("input",{type:"text",value:e.name,onChange:t=>k(e.id,{name:t.target.value}),className:"agent-config-name",placeholder:"Policy Name",disabled:!t.enablePolicies}),l.createElement("button",{className:"expand-btn",onClick:()=>m(a?null:e.id)},a?l.createElement(n.rXn,{size:16}):l.createElement(n.yQN,{size:16})),l.createElement("button",{className:"delete-btn",onClick:()=>A(e.id,"app"),disabled:!t.enablePolicies},l.createElement(n.TBR,{size:16})))),a&&l.createElement("div",{className:"agent-config-details"},l.createElement("div",{className:"form-group"},l.createElement("label",null,"Application Name"),l.createElement("input",{type:"text",value:e.appName,onChange:t=>k(e.id,{appName:t.target.value}),placeholder:"Which app does this apply to?",disabled:!t.enablePolicies})),l.createElement("div",{className:"form-group"},l.createElement("label",null,"Instructions"),l.createElement("textarea",{value:e.instructions||"",onChange:t=>k(e.id,{instructions:t.target.value}),placeholder:"Specific instructions for how the agent should use this application...",disabled:!t.enablePolicies,rows:4,style:{resize:"vertical",fontFamily:"inherit"}}),l.createElement("small",null,"General guidance for using this app (separate from rules and permissions)")),l.createElement("div",{className:"form-group"},l.createElement("label",null,"Rules"),l.createElement("input",{type:"text",value:e.rules.join(", "),onChange:t=>k(e.id,{rules:t.target.value.split(",").map(e=>e.trim()).filter(e=>e)}),placeholder:"rule1, rule2, rule3",disabled:!t.enablePolicies}),l.createElement("small",null,"Comma-separated application rules")),l.createElement("div",{className:"form-group"},l.createElement("label",null,"Permissions"),l.createElement("input",{type:"text",value:e.permissions.join(", "),onChange:t=>k(e.id,{permissions:t.target.value.split(",").map(e=>e.trim()).filter(e=>e)}),placeholder:"read, write, execute",disabled:!t.enablePolicies}),l.createElement("small",null,"What the app is allowed to do"))))})),0===t.appPolicies.length&&l.createElement("div",{className:"empty-state"},l.createElement("p",null,'No app policies configured. Click "Add App Policy" to create one.'))),("toolguards"===i||"toolenrichments"===i)&&l.createElement("div",{className:"config-card"},l.createElement("div",{className:"config-modal-tabs",style:{marginBottom:"16px"}},l.createElement("button",{className:"config-tab "+("guards"===c?"active":""),onClick:()=>o("guards")},"Tool Guards"),l.createElement("button",{className:"config-tab "+("enrichments"===c?"active":""),onClick:()=>o("enrichments")},"Tool Enrichment")),"guards"===c?l.createElement(l.Fragment,null,l.createElement("div",{className:"section-header"},l.createElement("h3",null,"Tool Guards & Safety Rails"),l.createElement("button",{className:"add-btn",onClick:v,disabled:!t.enablePolicies},l.createElement(n.FWt,{size:16}),"Add Tool Guard")),l.createElement("div",{className:"sources-list"},t.toolGuards.map(e=>{const a=r===e.id;return l.createElement("div",{key:e.id,className:"agent-config-card"},l.createElement("div",{className:"agent-config-header"},l.createElement("div",{className:"agent-config-top"},l.createElement("input",{type:"checkbox",checked:e.enabled,onChange:t=>x(e.id,{enabled:t.target.checked}),disabled:!t.enablePolicies}),l.createElement("input",{type:"text",value:e.name,onChange:t=>x(e.id,{name:t.target.value}),className:"agent-config-name",placeholder:"Guard Name",disabled:!t.enablePolicies}),l.createElement("button",{className:"expand-btn",onClick:()=>m(a?null:e.id)},a?l.createElement(n.rXn,{size:16}):l.createElement(n.yQN,{size:16})),l.createElement("button",{className:"delete-btn",onClick:()=>A(e.id,"toolguards"),disabled:!t.enablePolicies},l.createElement(n.TBR,{size:16}))),!a&&l.createElement("div",{className:"agent-summary"},l.createElement("span",{className:"agent-summary-item"},e.guardType.replace("_"," ")),l.createElement("span",{className:"agent-summary-item"},e.toolName||"No tool set"))),a&&l.createElement("div",{className:"agent-config-details"},l.createElement("div",{className:"form-group"},l.createElement("label",null,"Tool Name"),l.createElement("input",{type:"text",value:e.toolName,onChange:t=>x(e.id,{toolName:t.target.value}),placeholder:"e.g., web_search, file_system, send_email",disabled:!t.enablePolicies}),l.createElement("small",null,"The specific tool this guard applies to")),l.createElement("div",{className:"form-group"},l.createElement("label",null,"Description"),l.createElement("textarea",{value:e.description,onChange:t=>x(e.id,{description:t.target.value}),placeholder:"What this guard does...",rows:2,disabled:!t.enablePolicies})),l.createElement("div",{className:"form-group"},l.createElement("label",null,"Guard Type"),l.createElement("select",{value:e.guardType,onChange:t=>{const a=t.target.value;let l={};switch(a){case"rate_limit":l={maxCallsPerMinute:10,maxCallsPerHour:100};break;case"input_validation":l={inputValidationRules:[]};break;case"output_filter":l={outputFilterPatterns:[]};break;case"approval_required":l={approvers:[],requireConfirmation:!0};break;case"time_restriction":l={allowedTimeRanges:[]}}x(e.id,{guardType:a,config:l})},disabled:!t.enablePolicies},l.createElement("option",{value:"rate_limit"},"Rate Limit"),l.createElement("option",{value:"input_validation"},"Input Validation"),l.createElement("option",{value:"output_filter"},"Output Filter"),l.createElement("option",{value:"approval_required"},"Approval Required"),l.createElement("option",{value:"time_restriction"},"Time Restriction")),l.createElement("small",null,"Type of safety mechanism")),"rate_limit"===e.guardType&&l.createElement("div",{className:"form-row"},l.createElement("div",{className:"form-group"},l.createElement("label",null,"Max Calls Per Minute"),l.createElement("input",{type:"number",value:e.config.maxCallsPerMinute||10,onChange:t=>x(e.id,{config:{...e.config,maxCallsPerMinute:parseInt(t.target.value)}}),min:"1",disabled:!t.enablePolicies})),l.createElement("div",{className:"form-group"},l.createElement("label",null,"Max Calls Per Hour"),l.createElement("input",{type:"number",value:e.config.maxCallsPerHour||100,onChange:t=>x(e.id,{config:{...e.config,maxCallsPerHour:parseInt(t.target.value)}}),min:"1",disabled:!t.enablePolicies}))),"input_validation"===e.guardType&&l.createElement("div",{className:"form-group"},l.createElement("label",null,"Validation Rules"),l.createElement("input",{type:"text",value:e.config.inputValidationRules?.join(", ")||"",onChange:t=>x(e.id,{config:{...e.config,inputValidationRules:t.target.value.split(",").map(e=>e.trim()).filter(e=>e)}}),placeholder:"no-urls, max-length-1000, alphanumeric-only",disabled:!t.enablePolicies}),l.createElement("small",null,"Rules to validate input parameters (comma-separated)")),"output_filter"===e.guardType&&l.createElement("div",{className:"form-group"},l.createElement("label",null,"Filter Patterns"),l.createElement("input",{type:"text",value:e.config.outputFilterPatterns?.join(", ")||"",onChange:t=>x(e.id,{config:{...e.config,outputFilterPatterns:t.target.value.split(",").map(e=>e.trim()).filter(e=>e)}}),placeholder:"password, api-key, credit-card, ssn",disabled:!t.enablePolicies}),l.createElement("small",null,"Patterns to filter from tool output (comma-separated)")),"approval_required"===e.guardType&&l.createElement(l.Fragment,null,l.createElement("div",{className:"form-group"},l.createElement("label",null,"Approvers"),l.createElement("input",{type:"text",value:e.config.approvers?.join(", ")||"",onChange:t=>x(e.id,{config:{...e.config,approvers:t.target.value.split(",").map(e=>e.trim()).filter(e=>e)}}),placeholder:"admin, manager, supervisor",disabled:!t.enablePolicies}),l.createElement("small",null,"Who can approve tool execution (comma-separated)")),l.createElement("div",{className:"form-group"},l.createElement("label",{className:"checkbox-label"},l.createElement("input",{type:"checkbox",checked:e.config.requireConfirmation||!1,onChange:t=>x(e.id,{config:{...e.config,requireConfirmation:t.target.checked}}),disabled:!t.enablePolicies}),l.createElement("span",null,"Require Explicit Confirmation")),l.createElement("small",null,"User must manually confirm each tool call"))),"time_restriction"===e.guardType&&l.createElement("div",{className:"form-group"},l.createElement("label",null,"Allowed Time Ranges"),l.createElement("input",{type:"text",value:e.config.allowedTimeRanges?.map(e=>`${e.start}-${e.end}`).join(", ")||"",onChange:t=>{const a=t.target.value.split(",").map(e=>{const[t,a]=e.trim().split("-");return t&&a?{start:t.trim(),end:a.trim()}:null}).filter(e=>null!==e);x(e.id,{config:{...e.config,allowedTimeRanges:a}})},placeholder:"09:00-17:00, 14:00-18:00",disabled:!t.enablePolicies}),l.createElement("small",null,"Time ranges when tool can be used (HH:MM-HH:MM, comma-separated)"))))})),0===t.toolGuards.length&&l.createElement("div",{className:"empty-state"},l.createElement("p",null,'No tool guards configured. Click "Add Tool Guard" to create one.'))):l.createElement(l.Fragment,null,l.createElement("div",{className:"section-header"},l.createElement("h3",null,"Tool Enrichment & Custom Instructions"),l.createElement("button",{className:"add-btn",onClick:N,disabled:!t.enablePolicies},l.createElement(n.FWt,{size:16}),"Add Tool Enrichment")),l.createElement("div",{className:"sources-list"},t.toolEnrichments.map(e=>{const a=r===e.id;return l.createElement("div",{key:e.id,className:"agent-config-card"},l.createElement("div",{className:"agent-config-header"},l.createElement("div",{className:"agent-config-top"},l.createElement("input",{type:"checkbox",checked:e.enabled,onChange:t=>T(e.id,{enabled:t.target.checked}),disabled:!t.enablePolicies}),l.createElement("input",{type:"text",value:e.name,onChange:t=>T(e.id,{name:t.target.value}),className:"agent-config-name",placeholder:"Enrichment Name",disabled:!t.enablePolicies}),l.createElement("button",{className:"expand-btn",onClick:()=>m(a?null:e.id)},a?l.createElement(n.rXn,{size:16}):l.createElement(n.yQN,{size:16})),l.createElement("button",{className:"delete-btn",onClick:()=>A(e.id,"toolenrichments"),disabled:!t.enablePolicies},l.createElement(n.TBR,{size:16}))),!a&&l.createElement("div",{className:"agent-summary"},l.createElement("span",{className:"agent-summary-item"},e.toolName||"No tool set"),l.createElement("span",{className:"agent-summary-item"},e.customInstructions.length," instruction",1!==e.customInstructions.length?"s":""))),a&&l.createElement("div",{className:"agent-config-details"},l.createElement("div",{className:"form-group"},l.createElement("label",null,"Tool Name"),l.createElement("input",{type:"text",value:e.toolName,onChange:t=>T(e.id,{toolName:t.target.value}),placeholder:"e.g., web_search, file_system, send_email",disabled:!t.enablePolicies}),l.createElement("small",null,"The specific tool this enrichment applies to")),l.createElement("div",{className:"form-group"},l.createElement("label",null,"Pre-Execution Prompt"),l.createElement("textarea",{value:e.preExecutionPrompt||"",onChange:t=>T(e.id,{preExecutionPrompt:t.target.value}),placeholder:"Instructions to consider before using this tool...",rows:3,disabled:!t.enablePolicies}),l.createElement("small",null,"Guidance provided to the agent before executing the tool")),l.createElement("div",{className:"form-group"},l.createElement("label",null,"Post-Processing Rules"),l.createElement("textarea",{value:e.postProcessingRules||"",onChange:t=>T(e.id,{postProcessingRules:t.target.value}),placeholder:"How to process or interpret the tool's output...",rows:3,disabled:!t.enablePolicies}),l.createElement("small",null,"Instructions for handling the tool's response")),l.createElement("div",{className:"form-group"},l.createElement("label",null,"Context Hints"),l.createElement("textarea",{value:e.contextHints||"",onChange:t=>T(e.id,{contextHints:t.target.value}),placeholder:"When this tool is most useful, what context to consider...",rows:2,disabled:!t.enablePolicies}),l.createElement("small",null,"Contextual information about when and how to use this tool")),l.createElement("div",{className:"form-group"},l.createElement("div",{className:"form-group-header"},l.createElement("label",null,"Custom Instructions"),l.createElement("button",{className:"add-small-btn",onClick:()=>T(e.id,{customInstructions:[...e.customInstructions,""]}),disabled:!t.enablePolicies},l.createElement(n.FWt,{size:12}),"Add Instruction")),l.createElement("small",null,"Specific instructions for using this tool effectively"),l.createElement("div",{className:"policies-list"},e.customInstructions.map((a,i)=>l.createElement("div",{key:i,className:"policy-item"},l.createElement("textarea",{value:a,onChange:t=>{const a=[...e.customInstructions];a[i]=t.target.value,T(e.id,{customInstructions:a})},placeholder:"e.g., Always verify the search query is relevant before calling",rows:2,disabled:!t.enablePolicies}),l.createElement("button",{className:"remove-btn",onClick:()=>{const t=e.customInstructions.filter((e,t)=>t!==i);T(e.id,{customInstructions:t})},disabled:!t.enablePolicies},l.createElement(n.X,{size:14})))))),l.createElement("div",{className:"form-group"},l.createElement("div",{className:"form-group-header"},l.createElement("label",null,"Example Usages"),l.createElement("button",{className:"add-small-btn",onClick:()=>T(e.id,{exampleUsages:[...e.exampleUsages,""]}),disabled:!t.enablePolicies},l.createElement(n.FWt,{size:12}),"Add Example")),l.createElement("small",null,"Example scenarios or use cases for this tool"),l.createElement("div",{className:"policies-list"},e.exampleUsages.map((a,i)=>l.createElement("div",{key:i,className:"policy-item"},l.createElement("textarea",{value:a,onChange:t=>{const a=[...e.exampleUsages];a[i]=t.target.value,T(e.id,{exampleUsages:a})},placeholder:"e.g., Use when user asks about current weather in a specific location",rows:2,disabled:!t.enablePolicies}),l.createElement("button",{className:"remove-btn",onClick:()=>{const t=e.exampleUsages.filter((e,t)=>t!==i);T(e.id,{exampleUsages:t})},disabled:!t.enablePolicies},l.createElement(n.X,{size:14})))))),l.createElement("div",{className:"form-group"},l.createElement("div",{className:"form-group-header"},l.createElement("label",null,"Best Practices"),l.createElement("button",{className:"add-small-btn",onClick:()=>T(e.id,{bestPractices:[...e.bestPractices,""]}),disabled:!t.enablePolicies},l.createElement(n.FWt,{size:12}),"Add Practice")),l.createElement("small",null,"Best practices and tips for optimal tool usage"),l.createElement("div",{className:"policies-list"},e.bestPractices.map((a,i)=>l.createElement("div",{key:i,className:"policy-item"},l.createElement("input",{type:"text",value:a,onChange:t=>{const a=[...e.bestPractices];a[i]=t.target.value,T(e.id,{bestPractices:a})},placeholder:"e.g., Limit search results to top 5 for faster processing",disabled:!t.enablePolicies}),l.createElement("button",{className:"remove-btn",onClick:()=>{const t=e.bestPractices.filter((e,t)=>t!==i);T(e.id,{bestPractices:t})},disabled:!t.enablePolicies},l.createElement(n.X,{size:14}))))))))})),0===t.toolEnrichments.length&&l.createElement("div",{className:"empty-state"},l.createElement("p",null,'No tool enrichments configured. Click "Add Tool Enrichment" to create one.')))),"answer"===i&&l.createElement("div",{className:"config-card"},l.createElement("div",{className:"section-header"},l.createElement("h3",null,"Answer & Response Policies"),l.createElement("button",{className:"add-btn",onClick:f,disabled:!t.enablePolicies},l.createElement(n.FWt,{size:16}),"Add Answer Policy")),l.createElement("div",{className:"sources-list"},t.answerPolicies.map(e=>{const a=r===e.id;return l.createElement("div",{key:e.id,className:"agent-config-card"},l.createElement("div",{className:"agent-config-header"},l.createElement("div",{className:"agent-config-top"},l.createElement("input",{type:"checkbox",checked:e.enabled,onChange:t=>w(e.id,{enabled:t.target.checked}),disabled:!t.enablePolicies}),l.createElement("input",{type:"text",value:e.name,onChange:t=>w(e.id,{name:t.target.value}),className:"agent-config-name",placeholder:"Policy Name",disabled:!t.enablePolicies}),l.createElement("button",{className:"expand-btn",onClick:()=>m(a?null:e.id)},a?l.createElement(n.rXn,{size:16}):l.createElement(n.yQN,{size:16})),l.createElement("button",{className:"delete-btn",onClick:()=>A(e.id,"answer"),disabled:!t.enablePolicies},l.createElement(n.TBR,{size:16}))),!a&&l.createElement("div",{className:"agent-summary"},l.createElement("span",{className:"agent-summary-item"},e.responseFormat),l.createElement("span",{className:"agent-summary-item"},e.tone," tone"))),a&&l.createElement("div",{className:"agent-config-details"},l.createElement("div",{className:"form-row"},l.createElement("div",{className:"form-group"},l.createElement("label",null,"Response Format"),l.createElement("select",{value:e.responseFormat,onChange:t=>w(e.id,{responseFormat:t.target.value}),disabled:!t.enablePolicies},l.createElement("option",{value:"natural"},"Natural Language"),l.createElement("option",{value:"json"},"JSON"),l.createElement("option",{value:"structured"},"Structured"),l.createElement("option",{value:"markdown"},"Markdown")),l.createElement("small",null,"How responses should be formatted")),l.createElement("div",{className:"form-group"},l.createElement("label",null,"Response Tone"),l.createElement("select",{value:e.tone,onChange:t=>w(e.id,{tone:t.target.value}),disabled:!t.enablePolicies},l.createElement("option",{value:"professional"},"Professional"),l.createElement("option",{value:"casual"},"Casual"),l.createElement("option",{value:"technical"},"Technical"),l.createElement("option",{value:"friendly"},"Friendly"),l.createElement("option",{value:"formal"},"Formal")),l.createElement("small",null,"Communication style for responses"))),"json"===e.responseFormat&&l.createElement("div",{className:"form-group"},l.createElement("label",null,"JSON Schema"),l.createElement("textarea",{value:e.jsonSchema||"",onChange:t=>w(e.id,{jsonSchema:t.target.value}),placeholder:'{\n  "type": "object",\n  "properties": {\n    "answer": { "type": "string" }\n  }\n}',rows:6,disabled:!t.enablePolicies,style:{fontFamily:"monospace",fontSize:"12px"}}),l.createElement("small",null,"JSON schema that responses must adhere to")),l.createElement("div",{className:"form-group"},l.createElement("label",null,"Max Response Length"),l.createElement("input",{type:"number",value:e.maxResponseLength||"",onChange:t=>w(e.id,{maxResponseLength:t.target.value?parseInt(t.target.value):void 0}),placeholder:"e.g., 500",min:"1",disabled:!t.enablePolicies}),l.createElement("small",null,"Maximum number of characters (leave empty for no limit)")),l.createElement("div",{className:"form-row"},l.createElement("div",{className:"form-group"},l.createElement("label",{className:"checkbox-label"},l.createElement("input",{type:"checkbox",checked:e.includeConfidence,onChange:t=>w(e.id,{includeConfidence:t.target.checked}),disabled:!t.enablePolicies}),l.createElement("span",null,"Include Confidence Score")),l.createElement("small",null,"Add confidence level to responses")),l.createElement("div",{className:"form-group"},l.createElement("label",{className:"checkbox-label"},l.createElement("input",{type:"checkbox",checked:e.includeSources,onChange:t=>w(e.id,{includeSources:t.target.checked}),disabled:!t.enablePolicies}),l.createElement("span",null,"Include Sources")),l.createElement("small",null,"Cite information sources in responses"))),l.createElement("div",{className:"form-group"},l.createElement("label",null,"Required Disclaimer"),l.createElement("textarea",{value:e.requiredDisclaimer||"",onChange:t=>w(e.id,{requiredDisclaimer:t.target.value}),placeholder:"Optional disclaimer to append to all responses...",rows:2,disabled:!t.enablePolicies}),l.createElement("small",null,"Text automatically added to every response")),l.createElement("div",{className:"form-group"},l.createElement("div",{className:"form-group-header"},l.createElement("label",null,"Custom Instructions"),l.createElement("button",{className:"add-small-btn",onClick:()=>w(e.id,{customInstructions:[...e.customInstructions,""]}),disabled:!t.enablePolicies},l.createElement(n.FWt,{size:12}),"Add Instruction")),l.createElement("small",null,"Additional rules the agent must follow when responding"),l.createElement("div",{className:"policies-list"},e.customInstructions.map((a,i)=>l.createElement("div",{key:i,className:"policy-item"},l.createElement("input",{type:"text",value:a,onChange:t=>{const a=[...e.customInstructions];a[i]=t.target.value,w(e.id,{customInstructions:a})},placeholder:"e.g., Always include a summary at the start",disabled:!t.enablePolicies}),l.createElement("button",{className:"remove-btn",onClick:()=>{const t=e.customInstructions.filter((e,t)=>t!==i);w(e.id,{customInstructions:t})},disabled:!t.enablePolicies},l.createElement(n.X,{size:14})))))),l.createElement("div",{className:"form-group"},l.createElement("div",{className:"form-group-header"},l.createElement("label",null,"Forbidden Phrases"),l.createElement("button",{className:"add-small-btn",onClick:()=>w(e.id,{forbiddenPhrases:[...e.forbiddenPhrases,""]}),disabled:!t.enablePolicies},l.createElement(n.FWt,{size:12}),"Add Phrase")),l.createElement("small",null,"Phrases that must not appear in responses"),l.createElement("div",{className:"policies-list"},e.forbiddenPhrases.map((a,i)=>l.createElement("div",{key:i,className:"policy-item"},l.createElement("input",{type:"text",value:a,onChange:t=>{const a=[...e.forbiddenPhrases];a[i]=t.target.value,w(e.id,{forbiddenPhrases:a})},placeholder:"e.g., I'm not sure, I don't know",disabled:!t.enablePolicies}),l.createElement("button",{className:"remove-btn",onClick:()=>{const t=e.forbiddenPhrases.filter((e,t)=>t!==i);w(e.id,{forbiddenPhrases:t})},disabled:!t.enablePolicies},l.createElement(n.X,{size:14}))))))))})),0===t.answerPolicies.length&&l.createElement("div",{className:"empty-state"},l.createElement("p",null,'No answer policies configured. Click "Add Answer Policy" to create one.')))),l.createElement("div",{className:"config-modal-footer"},l.createElement("button",{className:"cancel-btn",onClick:e},"Cancel"),l.createElement("button",{className:`save-btn ${d}`,onClick:async()=>{u("saving");try{(await fetch("/api/config/policies",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok?(u("success"),setTimeout(()=>u("idle"),2e3)):(u("error"),setTimeout(()=>u("idle"),2e3))}catch(e){u("error"),setTimeout(()=>u("idle"),2e3)}},disabled:"saving"===d},l.createElement(n.eMP,{size:16}),"idle"===d&&"Save Changes","saving"===d&&"Saving...","success"===d&&"Saved!","error"===d&&"Error!"))))}}}]);